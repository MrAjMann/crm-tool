<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<link href="/src/output.css" rel="stylesheet" />
		<title>Data on the Downs - Customers</title>
	</head>
	<body>
		<body class="bg-gray-100">
			<div class="container mx-auto p-4">
				<h1 class="text-2xl font-semibold text-gray-800 mb-4">Customers</h1>

				<!-- Search Form -->
				<div class="mb-4">
					<input
						type="text"
						hx-get="/search-customers"
						hx-trigger="keyup delayed:500ms"
						hx-target="#customer-table"
						class="p-2 border rounded w-full"
						placeholder="Search customers..."
					/>
				</div>

				<!-- Customer Table -->
				<div id="customer-table" class="bg-white shadow-md rounded p-4">
					<table class="min-w-full leading-normal rounded">
						<thead>
							<tr>
								<th
									class="px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider"
								>
									CustomerId
								</th>
								<th
									class="px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider"
								>
									Name
								</th>
								<th
									class="px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider"
								>
									Email
								</th>
								<th
									class="px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider"
								>
									Company
								</th>
								<th
									class="px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider"
								>
									Phone
								</th>
								<th
									class="px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider"
								>
									Actions
								</th>
							</tr>
						</thead>

						<tbody>

							{{ range . }}
							<tr
								class="customer-row bg-gray-200 hover:bg-blue-700 gap-4 cursor-pointer"
							>
								<td class="px-5 py-5 border-b border-gray-200 text-sm">
									{{ .Id }}
								</td>
								<td class="px-5 py-5 border-b border-gray-200 text-sm">
									{{ .FirstName }}
								</td>
								<td class="px-5 py-5 border-b border-gray-200 text-sm">
									{{ .Email }}
								</td>
								<td class="px-5 py-5 border-b border-gray-200 text-sm">
									{{ .CompanyName }}
								</td>
								<td class="px-5 py-5 border-b border-gray-200 text-sm">
									{{ .Phone }}
								</td>
								<td class="px-5 py-5 border-b border-gray-200 text-sm">
									<a
										href="/customer/{{ .Id }}"
										class="text-blue-600 hover:text-blue-800"
										>View</a
									>
									|
									<a
										href="/customer/edit/{{ .Id }}"
										class="text-green-600 hover:text-green-800"
										>Edit</a
									>
									|
									<a
										href="/customer/delete/{{ .Id }}"
										hx-delete="/customer/delete/{{ .Id }}"
										hx-confirm="Are you sure you want to delete this customer?"
										class="text-red-600 hover:text-red-800"
										>Delete</a
									>
								</td>
							</tr>
							{{else}}
							<tr>
								<td colspan="5" class="text-center py-4">
									No customers found.
								</td>
								{{ end }}
								<!-- Repeat for other customers -->
							</tr>
						</tbody>
					</table>
				</div>
			</div>
		</body>
	</body>
</html>
